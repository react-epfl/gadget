<?xml version="1.0" encoding="UTF-8"?>
<Module>
  <ModulePrefs title="Apps view"
                author_email="evgeny.bogdanov@epfl.ch"
                author="Evgeny Bogdanov"
                description="This functional skin takes all apps from a space and shows them in a grid layout that can be adapted to user's needs. At the moment, it works only in Graasp - http://graasp.epfl.ch">
    <Require feature="dynamic-height" />
    <Require feature="shindig-container" />
  </ModulePrefs>
  <Content type="html" view="default,canvas,home,profile"><![CDATA[

<link href="http://localhost/gadget/test/grid_view/app.css" rel="stylesheet" type="text/css">

<div id="container" onmouseover="adjustHeight();">
  <div id="not_owner" style="display:none">You are not a space owner. Your changes to apps arrangement will not be saved.</div>
  <div id="popup" style="display:none">
    <div><b>App size</b>: fixed or flexible (apps resize automatically when window is resized)</div>
    <div><b>Drag&Drop an app</b> to change the order</div>
    <div><b>Resize an app</b> by dragging its right border</div>
    <span class="button" onclick="$('#popup').hide()">Close</span>
  </div>
  <div id="title">Apps in the space</div>
  <div id="menu" style="">
    <input type="button" class = "select button" id="help_button" value="Help"></input>
    <select class = "select" id="select_button" onchange="sizeTypeChanged();">
      <option value="px">fixed (px)</option>
      <option value="%">flexible (%)</option>
    </select>
    <span id="name" class="select">App size: </span>
  </div>
  <div id="center"></div>
</div>

<script type="text/javascript" src="http://localhost/gadget/libs/jquery-1.8.0.min.js"></script>
<script type="text/javascript" src="http://localhost/gadget/libs/jquery-ui-1.8.23.custom.min.js"></script>
<script type="text/javascript" src="http://localhost/gadget/libs/underscore-min.js"></script>
<script type="text/javascript" src="http://localhost/gadget/test/grid_view/app.js"></script>
<script type="text/javascript">
// no appdata calls if isFreeze set to true
var isFreeze = true
function getData(callback) {
  var output = {
    viewer:
      { displayName: "Evgeny1"
      , id: "3"
      }
  , context:
      { contextId: "55"
      , contextType: "@space"
      }
  , owner:
      { displayName: "Evgeny1"
      , id: "3"
      }
  , apps:
      { list: [
          { appType: "WidgetGadget"
          , appUrl: "http://localhost/gadget/test/gadget_info.xml"
          , displayName: "info"
          , filterCapability: {}
          , id: "76"
          , name: "info"
          , objectId: 76
          , parentId: "55"
          , parentType: "@space"
          , profileUrl: "http://localhost:3000/#item=widget_76"
          , thumbnailUrl: "http://localhost:3000/images/pics/widget_thumb.png"
          , token: null
          , updated: "2012-09-16T19:41:48.000Z"
          },
          { appType: "WidgetGadget"
          , appUrl: "http://localhost/gadget/test/iframe.xml"
          , displayName: "iframe"
          , filterCapability: {}
          , id: "77"
          , name: "iframe"
          , objectId: 77
          , parentId: "55"
          , parentType: "@space"
          , profileUrl: "http://localhost:3000/#item=widget_77"
          , thumbnailUrl: "http://localhost:3000/images/pics/widget_thumb.png"
          , token: null
          , updated: "2012-09-16T19:42:12.000Z"

          },
          { appType: "WidgetGadget"
          , appUrl: "http://localhost/gadget/test/gadget_info.xml"
          , displayName: "info2"
          , filterCapability: {}
          , id: "78"
          , name: "info2"
          , objectId: 78
          , parentId: "55"
          , parentType: "@space"
          , profileUrl: "http://localhost:3000/#item=widget_78"
          , thumbnailUrl: "http://localhost:3000/images/pics/widget_thumb.png"
          , token: null
          , updated: "2012-09-17T08:59:15.000Z"
          }
      ]}
  , appdata: {
      s_55: { settings: '{"order":["76","77","78"],"sizes":{"76":540,"77":324,"78":275},"sizeType":"px"}'  }
    }
  }

  callback(output)
}
</script>

<script type="text/javascript">
gadgets.util.registerOnLoadHandler(initialize);
</script>

  ]]></Content>
</Module>
