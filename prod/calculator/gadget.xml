<Module>
 <ModulePrefs title="calc" height="420" author="Hagop Jamkojian" author_email="hagop.jamkojian@epfl.ch">
    <Require feature="osapi" />
    
 </ModulePrefs>
 <Content type="html" view="home,canvas">
 <![CDATA[
    <head>
    <style>
        #app_url {
            -webkit-transform-origin: top left;
            -moz-transform-origin: top left;
            -ms-transform-origin: top left;
            -o-transform-origin: top left;
            transform-origin: top left;
            width: 98.9%;
            -webkit-transform: scale(1.0111223458);
            -moz-transform: scale(1.0111223458);
            -ms-transform: scale(1.0111223458);
            -o-transform: scale(1.0111223458);
            transform: scale(1.0111223458);
        
        }

    </style>
    </head>

    <div style="width: 100%; overflow: hidden">
        <iframe width="590" id="app_url" height="420" style="border: 1px solid silver;"></iframe>
    </div>


    <script type="text/javascript" src="http://shindig2.epfl.ch/ils/main/ils_graaspeu.js"></script>
    <script type="text/javascript" src="http://shindig2.epfl.ch/ils/metadata/MetadataHandler.js"></script>
    <script type="text/javascript" src="http://shindig2.epfl.ch/ils/applog/ActionLogger.js"></script>
    <script src="http://composer.golabz.eu/static/storage.js"></script>

    <script type="text/javascript">
		function generateUUID(){
			var d = new Date().getTime();
			var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
				var r = (d + Math.random()*16)%16 | 0;
				d = Math.floor(d/16);
				return (c=='x' ? r : (r&0x3|0x8)).toString(16);
			});
			return uuid;
		}

        function init() {
            var prefs = new gadgets.Prefs();
            var urls_per_language = {};
            var default_url = "http://web2.0calc.com/widgets/horizontal/?options=%7B%22angular%22%3A%22deg%22%2C%22options%22%3A%22hide%22%2C%22menu%22%3A%22show%22%7D";
            var url = urls_per_language[prefs.getLang()];
            if (!url) 
                url = default_url;
            document.getElementById("app_url").src = url;

            var uniqueSession = generateUUID();
            
            reportStarted("calc", "http://composer.golabz.eu/embed/apps/db179596-cfda-4684-8f2e-fcbfa1eece99/app.xml", uniqueSession);
        }

        gadgets.util.registerOnLoadHandler(init);
        gadgets.window.adjustHeight();
    </script>
 ]]>
</Content>
</Module>