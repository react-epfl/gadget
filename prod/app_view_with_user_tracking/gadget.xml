<?xml version="1.0" encoding="UTF-8"?>
<Module>
  <ModulePrefs title="Apps view with user tracking"
                author_email="na.li@epfl.ch"
                author="Na Li"
                description="This functional skin takes all apps from a space and shows them in a grid layout that can be adapted to user's needs. It asks for the user name when the user loads the page, and saves the user actions through appdata. At the moment, it works only in Graasp - http://graasp.epfl.ch">
    <Require feature="dynamic-height" />
    <Require feature="shindig-container" />
  </ModulePrefs>
  <Content type="html" view="default,canvas,home,profile"><![CDATA[

<link href="http://graasp.epfl.ch/gadget/prod/app_view_with_user_tracking/app.css" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="http://graasp.epfl.ch/gadget/libs/bootstrap/css/bootstrap.min.css" type="text/css">


<div id="container" onmouseover="adjustHeight();">
  <div id="not_owner" style="display:none">You are not a space owner. Your changes to apps arrangement will not be saved.</div>
  <div id="popup" style="display:none">
    <div><b>App size</b>: fixed or relative (apps resize automatically when window is resized)</div>
    <div><b>Drag&Drop an app</b> to change the order</div>
    <div><b>Resize an app</b> by dragging its right border</div>
    <span class="button" onclick="$('#popup').hide()">Close</span>
  </div>
  <div id = "banner">
    <span><img src="graaasp_logo.png" id="graasp_logo"></span>
    <span id ="title"></span>
    <span id ="hello_msg"></span>
  </div>
  <div id="menu" style="">
    <input type="button" class = "select button" id="help_button" value="Help"></input>
    <select class = "select" id="select_button" onchange="sizeTypeChanged();">
      <option value="px">fixed (px)</option>
      <option value="%">relative (%)</option>
    </select>
    <span id="name" class="select">App size: </span>
  </div>
  <div id="center"></div>
</div>

<div class="modal hide fade" id="login_popup" data-keyboard="false" data-backdrop="static">
  <div class="modal-header">
    <h3>Please enter your name</h3>
  </div>
  <div class="modal-body" id="popup_body">
    <div id="error_msg" class="alert fade in hide alert-error">  
      Please enter a valid name! 
    </div> 
    <!-- <span>Please enter a valid name!</span> -->
    <input type="text" id="user_name">
  </div>
  <div class="modal-footer" id="popup_footer">
    <button type="button" class="btn btn-primary" id="ok_btn">Ok</button>
  </div>
</div>

<script type="text/javascript" src="http://graasp.epfl.ch/gadget/libs/jquery-1.8.0.min.js"></script>
<script type="text/javascript" src="http://graasp.epfl.ch/gadget/libs/jquery-ui-1.8.23.custom.min.js"></script>
<script type="text/javascript" src="http://graasp.epfl.ch/gadget/libs/jquery.cookie.js"></script>
<script type="text/javascript" src="http://graasp.epfl.ch/gadget/libs/underscore-min.js"></script>
<script type="text/javascript" src="http://graasp.epfl.ch/gadget/libs/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="http://graasp.epfl.ch/gadget/prod/app_view_with_user_tracking/app.js"></script>
<script type="text/javascript" src="http://graasp.epfl.ch/gadget/prod/app_view_with_user_tracking/data.js"></script>


<script type="text/javascript">
//gadgets.util.registerOnLoadHandler(initialize);
$(window).load(function () {
if (osapi.people.getViewer) {
  initialize()
} else {
  setTimeout(function(){
    initialize()
  }, 1000)
}
})
</script>

  ]]></Content>
</Module>
